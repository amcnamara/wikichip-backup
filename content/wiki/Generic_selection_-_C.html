<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>Generic selection - C - WikiChip</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.3" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=Generic_selection_-_C&amp;action=edit" />
<link rel="edit" title="Edit" href="/w/index.php?title=Generic_selection_-_C&amp;action=edit" />
<link rel="shortcut icon" href="/w/skins/common/images/wikichip.png" />
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="WikiChip (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://en.wikichip.org/w/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="WikiChip Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikichip:resourceloader:filter:minify-css:7:f94d0b6cb2fc4f2fb8588cadfb5f9b4c */</style>

<script src="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Generic_selection_-_C","wgTitle":"Generic selection - C","wgCurRevisionId":1008,"wgArticleId":105,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["C programming language","Type-generic - C"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Generic_selection_-_C","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgVectorEnabledModules":{"collapsiblenav":true,"collapsibletabs":true,"expandablesearch":false,"footercleanup":false,"sectioneditlinks":false,"experiments":true},"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"templateEditor":false,"templates":false,"preview":true,"previewDialog":false,"publish":true,"toc":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"vector-simplesearch":1,"upwiz_deflicense":"default","upwiz_def3rdparty":"default","upwiz_deflicensetype":"default","upwiz_maxsimultaneous":"default","usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs460":false,"searchNs461":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: wikichip:resourceloader:filter:minify-js:7:1cef13c864315bd209b5368579a0e04a */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-c {line-height: normal;}
.source-c li, .source-c pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for c
 * CSS class: source-c, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.c.source-c .de1, .c.source-c .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.c.source-c  {font-family:monospace;}
.c.source-c .imp {font-weight: bold; color: red;}
.c.source-c li, .c.source-c .li1 {font-weight: normal; vertical-align:top;}
.c.source-c .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.c.source-c .li2 {font-weight: bold; vertical-align:top;}
.c.source-c .kw1 {color: #0000A3; font-weight: bold;}
.c.source-c .kw2 {color: #000000; font-weight: bold;}
.c.source-c .kw3 {color: #000066;}
.c.source-c .kw4 {color: #0057AE;}
.c.source-c .co1 {color: #666666; font-style: italic;}
.c.source-c .co2 {color: #4D8D8D; font-weight: bold;}
.c.source-c .coMULTI {color: #669933; font-style: italic;}
.c.source-c .es0 {color: #000099; font-weight: bold;}
.c.source-c .es1 {color: #000099; font-weight: bold;}
.c.source-c .es2 {color: #660099; font-weight: bold;}
.c.source-c .es3 {color: #660099; font-weight: bold;}
.c.source-c .es4 {color: #660099; font-weight: bold;}
.c.source-c .es5 {color: #006699; font-weight: bold;}
.c.source-c .br0 {color: #007A00;}
.c.source-c .sy0 {color: #339933;}
.c.source-c .st0 {color: #BF0303;}
.c.source-c .nu0 {color: #B08000;}
.c.source-c .nu6 {color: #208080;}
.c.source-c .nu8 {color: #208080;}
.c.source-c .nu12 {color: #208080;}
.c.source-c .nu16 {color:#800080;}
.c.source-c .nu17 {color:#800080;}
.c.source-c .nu18 {color:#800080;}
.c.source-c .nu19 {color:#800080;}
.c.source-c .me1 {color: #202020;}
.c.source-c .me2 {color: #202020;}
.c.source-c .ln-xtra, .c.source-c li.ln-xtra, .c.source-c div.ln-xtra {background-color: #ffc;}
.c.source-c span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/w/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Generic_selection_-_C skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Generic selection - C</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From WikiChip</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="noprint" style="float:right; box-shadow: 0 0 4px #BDBDBD inset; background-color: #FFFFFF; border-radius: 5px; width:220px; padding:10px; margin-left: 10px; margin-bottom: 15px;">
<table cellspacing="0">
<tr>
<td style="width: 220px; text-align: center; font-size: 15px; font-weight: bold; color: #4A98D9;">
<p>C Programming Language
</p>
</td></tr>
<tr>
<td style="padding-left: 20px;">
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Intro</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Introduction_-_C&amp;action=edit&amp;redlink=1" class="new" title="Introduction - C (page does not exist)">Introduction to C</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Basics</p>
<dl><dd><ul><li> <a href="/wiki/Variables_-_C" title="Variables - C">Variables</a>
</li><li> <a href="/w/index.php?title=Basic_I/O_-_C&amp;action=edit&amp;redlink=1" class="new" title="Basic I/O - C (page does not exist)">Basic I/O</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Math</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Basic_arithmetics_-_C&amp;action=edit&amp;redlink=1" class="new" title="Basic arithmetics - C (page does not exist)">Basic Arithmetics</a> 
</li><li> <a href="/w/index.php?title=Math_functions_-_C&amp;action=edit&amp;redlink=1" class="new" title="Math functions - C (page does not exist)">Math functions</a>
</li><li> <a href="/w/index.php?title=Complex_numbers_-_C&amp;action=edit&amp;redlink=1" class="new" title="Complex numbers - C (page does not exist)">Complex Numbers</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Control Structures</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Conditional_statements_-_C&amp;action=edit&amp;redlink=1" class="new" title="Conditional statements - C (page does not exist)">If Statements</a>
</li><li> <a href="/w/index.php?title=Loop_constructs_-_C&amp;action=edit&amp;redlink=1" class="new" title="Loop constructs - C (page does not exist)">Loop Constructs</a>
</li><li> <a href="/w/index.php?title=Goto_statements_-_C&amp;action=edit&amp;redlink=1" class="new" title="Goto statements - C (page does not exist)">Goto Statements</a>
</li><li> <a href="/w/index.php?title=Nonlocal_jumps_-_C&amp;action=edit&amp;redlink=1" class="new" title="Nonlocal jumps - C (page does not exist)">Nonlocal jumps</a>
</li><li> <a href="/w/index.php?title=Functions_-_C&amp;action=edit&amp;redlink=1" class="new" title="Functions - C (page does not exist)">Functions</a>
</li><li> <a href="/w/index.php?title=Error_handling_-_C&amp;action=edit&amp;redlink=1" class="new" title="Error handling - C (page does not exist)">Error Handling</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Operators</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Operators_-_C&amp;action=edit&amp;redlink=1" class="new" title="Operators - C (page does not exist)">Operators</a>
</li><li> <a href="/wiki/Operator_precedence_and_associativity_-_C" title="Operator precedence and associativity - C">Operator Precedence</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Arrays &amp; Pointers</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Arrays_-_C&amp;action=edit&amp;redlink=1" class="new" title="Arrays - C (page does not exist)">Arrays</a>
</li><li> <a href="/w/index.php?title=Pointers_-_C&amp;action=edit&amp;redlink=1" class="new" title="Pointers - C (page does not exist)">Pointers</a>
</li><li> <a href="/w/index.php?title=Memory_management_-_C&amp;action=edit&amp;redlink=1" class="new" title="Memory management - C (page does not exist)">Memory Management</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Strings</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Character_handling_-_C&amp;action=edit&amp;redlink=1" class="new" title="Character handling - C (page does not exist)">Character Handling</a>
</li><li> <a href="/w/index.php?title=Strings_handling_-_C&amp;action=edit&amp;redlink=1" class="new" title="Strings handling - C (page does not exist)">Strings Handling</a>
</li><li> <a href="/w/index.php?title=Wide_strings_-_C&amp;action=edit&amp;redlink=1" class="new" title="Wide strings - C (page does not exist)">Wide Strings</a>
</li><li> <a href="/w/index.php?title=Unicode_-_C&amp;action=edit&amp;redlink=1" class="new" title="Unicode - C (page does not exist)">Unicode</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Structured Types</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Structures_-_C&amp;action=edit&amp;redlink=1" class="new" title="Structures - C (page does not exist)">Structures</a>
</li><li> <a href="/w/index.php?title=Unions_-_C&amp;action=edit&amp;redlink=1" class="new" title="Unions - C (page does not exist)">Unions</a>
</li><li> <a href="/w/index.php?title=Bit_fields_-_C&amp;action=edit&amp;redlink=1" class="new" title="Bit fields - C (page does not exist)">Bitfields</a>
</li><li> <a href="/w/index.php?title=Enumerated_types_-_C&amp;action=edit&amp;redlink=1" class="new" title="Enumerated types - C (page does not exist)">Enums</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">I/O</p>
<dl><dd><ul><li> <a href="/w/index.php?title=Standard_streams_-_C&amp;action=edit&amp;redlink=1" class="new" title="Standard streams - C (page does not exist)">Standard Streams</a>
</li><li> <a href="/w/index.php?title=File_I/O_-_C&amp;action=edit&amp;redlink=1" class="new" title="File I/O - C (page does not exist)">File I/O</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Concurrency</p>
<dl><dd><ul><li> <a href="/wiki/Concurrency_-_C" title="Concurrency - C">Concurrency</a>
</li><li> <a href="/w/index.php?title=Inter%E2%80%90thread_communication_-_C&amp;action=edit&amp;redlink=1" class="new" title="Inter‐thread communication - C (page does not exist)">Inter‐Thread Communication</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px;">Other</p>
<dl><dd><ul><li> <a href="/wiki/Data_types_-_C" title="Data types - C">Data Types</a>
</li><li> <a href="/wiki/Static_assertions_-_C" title="Static assertions - C">Static Assertions</a>
</li><li> <strong class="selflink">Generic Selections</strong>
</li><li> <a href="/wiki/Preprocessor_-_C" title="Preprocessor - C">Preprocessor</a>
</li><li> <a href="/wiki/C_standard_library" title="C standard library">Standard Library</a>
</li></ul>
</dd></dl>
</td></tr></table>
<p><span class="noprint plainlinks navbar" style="float:right;"><small><span style="white-space:nowrap;word-spacing:-.12em;"><a href="/wiki/Template:C_Guide" title="Template:C Guide"><span style="" title="View this template">v</span></a><span style="">&#32;<b>&#183;</b>&#32;</span><a href="/wiki/Template:C_Guide" title="Template:C Guide"><span style="" title="Discuss this template">d</span></a><span style="">&#32;<b>&#183;</b>&#32;</span><a rel="nofollow" class="external text" href="http://en.wikichip.org/w/index.php?title=Template:C_Guide&amp;action=edit"><span style="" title="Edit this template">e</span></a></span></small></span>
</p>
</div>
<p>The <b>generic selection</b> is an expression that was added to the <a href="/wiki/C_programming_language" title="C programming language" class="mw-redirect">C programming language</a> in the <a href="/wiki/C11" title="C11">C11</a> standard to facilitates compile-time choices based on the type of an expression. This feature was added to standardize the compiler magic that was required for <a href="/wiki/C99" title="C99">C99's</a> type-generic math (<a href="/w/index.php?title=Tgmath.h_-_C&amp;action=edit&amp;redlink=1" class="new" title="Tgmath.h - C (page does not exist)">&lt;tgmath.h&gt;</a>).
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Examples"><span class="tocnumber">3</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Uses_in_.3Ctgmath.h.3E"><span class="tocnumber">4</span> <span class="toctext">Uses in &lt;tgmath.h&gt;</span></a></li>
</ul>
</td></tr></table>
<h2><span class="editsection">[<a href="/w/index.php?title=Generic_selection_-_C&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a>]</span> <span class="mw-headline" id="Overview"> Overview </span></h2>
<p><a href="/wiki/C99" title="C99">C99</a> introduced a new set of math macros called type-generic math which were provided in the <a href="/w/index.php?title=Tgmath.h_-_C&amp;action=edit&amp;redlink=1" class="new" title="Tgmath.h - C (page does not exist)">&lt;tgmath.h&gt;</a> header. These macros expanded to their appropriate functions based on the type of the arguments that were provided. For example, the cos() macro would expand to cosl(), cosf(), or ccos() depending if the argument is a double, a long double, or a <a href="/w/index.php?title=Complex_-_C&amp;action=edit&amp;redlink=1" class="new" title="Complex - C (page does not exist)">complex</a> double.
</p><p>The C99 standard made no attempt at explaining how the functionality must be accomplished making each compiler do its own thing. <a href="/wiki/C11" title="C11">C11</a> introduced the <i>generic selection expression</i> which attempts to provide a standard mechanism for performing compile-time choices based on a type of an expression.
</p>
<h2><span class="editsection">[<a href="/w/index.php?title=Generic_selection_-_C&amp;action=edit&amp;section=2" title="Edit section: Syntax">edit</a>]</span> <span class="mw-headline" id="Syntax"> Syntax </span></h2>
<p>The <b>generic selection expression</b> is implemented with a new <b>_Generic</b> keyboard:
</p>
<span class="tex2jax_ignore"><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="c source-c"><pre class="de1"><span class="kw1">_Generic</span><span class="br0">&#40;</span>  control<span class="sy0">-</span>expression <span class="sy0">,</span> generic<span class="sy0">-</span>assoc<span class="sy0">-</span>list <span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div></span>
<p>Where the <i>generic-assoc-list</i> consists of a comma-delimited list of: <i>type-name: assignment-expression</i> pairs and an optional default generic association that takes the form <i>default: assignment-expression</i>.
</p><p>Inside the generic selection expression, the control-expression does not get evaluated. Its type is used to select one of the pairs from the generic associate list that has a type compatible with the one from the control-expression. Otherwise, the result expression of the generic selection is the expression in the default generic association.
</p><p>The type and value of the generic selection are identical to those of its result expression.
</p>
<h2><span class="editsection">[<a href="/w/index.php?title=Generic_selection_-_C&amp;action=edit&amp;section=3" title="Edit section: Examples">edit</a>]</span> <span class="mw-headline" id="Examples"> Examples </span></h2>
<p>Consider the following <i>get_type</i> macro which returns a string representation of the type:
</p>
<span class="tex2jax_ignore"><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="c source-c"><pre class="de1"><span class="co2">#define get_type(expr)                \
        _Generic((expr),              \
                    int: &quot;int&quot;,       \
                   char: &quot;char&quot;,      \
                 double: &quot;double&quot;     \
                )</span></pre></div></div></span>
<p>We can use it in the following way:
</p>
<span class="tex2jax_ignore"><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="c source-c"><pre class="de1"><span class="kw3">printf</span><span class="br0">&#40;</span><span class="st0">&quot;Type of 234:&#160;%s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> get_type<span class="br0">&#40;</span><span class="nu0">234</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">printf</span><span class="br0">&#40;</span><span class="st0">&quot;Type of 'A':&#160;%s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> get_type<span class="br0">&#40;</span><span class="st0">'A'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">printf</span><span class="br0">&#40;</span><span class="st0">&quot;Type of (char)'A':&#160;%s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> get_type<span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="st0">'A'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw3">printf</span><span class="br0">&#40;</span><span class="st0">&quot;Type of 3.14:&#160;%s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> get_type<span class="br0">&#40;</span><span class="nu16">3.14</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div></span>
<p>Which will produce the following result:
</p>
<span class="tex2jax_ignore"><pre>Type of 234: int
Type of 'A': int
Type of (char)'A': char
Type of 3.14: double</pre></span>
<h2><span class="editsection">[<a href="/w/index.php?title=Generic_selection_-_C&amp;action=edit&amp;section=4" title="Edit section: Uses in &lt;tgmath.h>">edit</a>]</span> <span class="mw-headline" id="Uses_in_.3Ctgmath.h.3E"> Uses in &lt;tgmath.h&gt; </span></h2>
<p>The <a href="/w/index.php?title=Tgmath.h&amp;action=edit&amp;redlink=1" class="new" title="Tgmath.h (page does not exist)">&lt;tgmath.h&gt;</a> header that was added in <a href="/wiki/C99" title="C99">C99</a> added support for type-generic math using some compiler magic unspecified by the standard. C11 now provides a standardized facility for achieving this magic. For example, one could implement the <a href="/w/index.php?title=Tgmath.h/cbrt_-_C&amp;action=edit&amp;redlink=1" class="new" title="Tgmath.h/cbrt - C (page does not exist)">cbrt</a> generic function that computes the cube-root like this:
</p>
<span class="tex2jax_ignore"><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="c source-c"><pre class="de1"><span class="co2">#define cbrt(X)                        \
         _Generic((X),                 \
                  long double: cbrtl,  \
                      default: cbrt,   \
                        float: cbrtf   \
                  )(X)</span></pre></div></div></span>
<p>Implementing some of the functions with multiple arguments becomes far more lengthly with a selection for each of the original cases. Consider the <a href="/w/index.php?title=Tgmath.h/pow_-_C&amp;action=edit&amp;redlink=1" class="new" title="Tgmath.h/pow - C (page does not exist)">pow</a> type-generic function. One could implement it as:
</p>
<span class="tex2jax_ignore"><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="c source-c"><pre class="de1"><span class="co2">#define tgm_select(expr, ldc, dc, fc, ld, d, f)        \
         _Generic(expr,                                \
                       long double _Complex:   ldc,    \
                            double _Complex:   dc,     \
                             float _Complex:   fc,     \
                                long double:   ld,     \
                                    default:   d,      \
                                      float:   f)</span>
&#160;
<span class="co2">#define pow(x, y)                                                                                    \
         _Generic((y),                                                                               \
                      long double _Complex: tgm_select(x, cpowl, cpowl, cpowl, cpowl, cpowl, cpowl), \
                           double _Complex: tgm_select(x, cpowl, cpow , cpow , cpowl, cpow , cpow ), \
                            float _Complex: tgm_select(x, cpowl, cpow , cpowf, cpowl, cpow , cpowf), \
                               long double: tgm_select(x, cpowl, cpowl, cpowl,  powl,  powl,  powl), \
                                   default: tgm_select(x, cpowl, cpow , cpow ,  powl,  pow ,  pow ), \
                                     float: tgm_select(x, cpowl, cpow , cpowf,  powl,  pow ,  powf), \
                 )(x, y)</span></pre></div></div></span>

<!-- 
NewPP limit report
Preprocessor visited node count: 124/1000000
Preprocessor generated node count: 543/1000000
Post‐expand include size: 4633/2097152 bytes
Template argument size: 64/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikichip:pcache:idhash:105-0!*!0!!en!*!* and timestamp 20131223233240 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://en.wikichip.org/w/index.php?title=Generic_selection_-_C&amp;oldid=1008">http://en.wikichip.org/w/index.php?title=Generic_selection_-_C&amp;oldid=1008</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/wiki/Category:C_programming_language" title="Category:C programming language">C programming language</a></li><li><a href="/wiki/Category:Type-generic_-_C" title="Category:Type-generic - C">Type-generic - C</a></li></ul></div></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<!-- header -->
			<div id="mw-head">
				
<!-- 0 -->
<div id="p-personal" role="navigation" class="">
	<h3>Personal tools</h3>
	<ul>
<li id="pt-createaccount"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Generic+selection+-+C&amp;type=signup">Create account</a></li><li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Generic+selection+-+C" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>

<!-- /0 -->
				<div id="left-navigation">
					
<!-- 0 -->
<div id="p-namespaces" role="navigation" class="vectorTabs">
	<h3>Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/Generic_selection_-_C"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/w/index.php?title=Talk:Generic_selection_-_C&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
				</div>
				<div id="right-navigation">
					
<!-- 0 -->
<div id="p-views" role="navigation" class="vectorTabs">
	<h3>Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/wiki/Generic_selection_-_C" >Read</a></span></li>
					<li id="ca-edit"><span><a href="/w/index.php?title=Generic_selection_-_C&amp;action=edit"  title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/w/index.php?title=Generic_selection_-_C&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet">
	<h3><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="/w/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" title="Search WikiChip [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="/w/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
				</div>
			</div>
			<!-- /header -->
			<!-- panel -->
			<div id="mw-panel">
				<!-- logo -->
					<div id="p-logo" role="banner"><a style="background-image: url(/w/skins/common/images/wikichip.png);" href="/wiki/Main_Page"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" role="navigation" id='p-navigation'>
	<h3>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://en.wikichip.org/wiki/Special:Random?nocache=1" rel="nofollow" title="Load a random page [x]" accesskey="x">Random page</a></li>
		</ul>
	</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" role="navigation" id='p-tb'>
	<h3>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Generic_selection_-_C" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Generic_selection_-_C" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-upload"><a href="/wiki/Special:UploadWizard" title="Upload files [u]" accesskey="u">Upload file</a></li>
			<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/w/index.php?title=Generic_selection_-_C&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/w/index.php?title=Generic_selection_-_C&amp;oldid=1008" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/w/index.php?title=Generic_selection_-_C&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
			<!-- /panel -->
		</div>
		<!-- footer -->
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 23 December 2013, at 14:06.</li>
											<li id="footer-info-viewcount">This page has been accessed 38 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="/wiki/WikiChip:Privacy_policy" title="WikiChip:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/WikiChip:About" title="WikiChip:About">About WikiChip</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/WikiChip:General_disclaimer" title="WikiChip:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="/w/skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="/w/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.vector.collapsibleNav","ext.vector.collapsibleTabs","skins.vector.js"], null, true);
}</script>
<script src="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<!-- Served in 0.077 secs. -->
	</body>
</html>
