<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>UDP Sockets - mIRC - WikiChip</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.3" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit" />
<link rel="edit" title="Edit" href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit" />
<link rel="shortcut icon" href="/w/skins/common/images/wikichip.png" />
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="WikiChip (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://en.wikichip.org/w/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="WikiChip Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikichip:resourceloader:filter:minify-css:7:f94d0b6cb2fc4f2fb8588cadfb5f9b4c */</style>

<script src="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"UDP_Sockets_-_mIRC","wgTitle":"UDP Sockets - mIRC","wgCurRevisionId":86,"wgArticleId":37,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["MIRC"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"UDP_Sockets_-_mIRC","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgVectorEnabledModules":{"collapsiblenav":true,"collapsibletabs":true,"expandablesearch":false,"footercleanup":false,"sectioneditlinks":false,"experiments":true},"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"templateEditor":false,"templates":false,"preview":true,"previewDialog":false,"publish":true,"toc":false},"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"vector-simplesearch":1,"upwiz_deflicense":"default","upwiz_def3rdparty":"default","upwiz_deflicensetype":"default","upwiz_maxsimultaneous":"default","usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs460":false,"searchNs461":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: wikichip:resourceloader:filter:minify-js:7:1cef13c864315bd209b5368579a0e04a */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<style type="text/css">/*<![CDATA[*/
pre .mirc_event { color: #AA0000; } 
pre .mirc_bracket { color: #0033cc;  } /* { } */
pre .mirc_prefix { color: #880000; }
pre .mirc_primaryident { color: #C00000; }
pre .mirc_identifier { color: #cc9933; }
pre .mirc_variable { color: #C83F00; }
pre .mirc_command { color: #9966cc; font-weight: bold;/*color: #00820C;*/ }
pre .mirc_control { color: #0033cc; font-weight: bold;/*color: #2200DD;*/ }
pre .mirc_group { color: #E59C00; }
pre .mirc_goto { color: #0D9BAC; }
/* comments must go last to override everything else */
pre .mirc_comment { color: #669933; font-style: italic;/*color: #888888;*/ }
pre .mirc_comment * { color: #669933; font-style: italic;/*color: #888888;*/font-weight:normal; }
/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/w/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-UDP_Sockets_-_mIRC skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">UDP Sockets - mIRC</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From WikiChip</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="noprint" style="float:right; box-shadow: 0 0 4px #BDBDBD inset; background-color: #FFFFFF; border-radius: 5px; width:220px; padding:10px; margin-left: 10px; margin-bottom: 15px;">
<table cellspacing="0">
<tr>
<td style="width: 220px; text-align: center; font-size: 15px; font-weight: bold; color: #4A98D9;"> mIRC Scripting Language
</td></tr>
<tr>
<td style="padding-left: 20px;">
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Intro</p>
<dl><dd><ul><li> <a href="/wiki/Introduction_-_mIRC" title="Introduction - mIRC">Introduction to mIRC</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Basics</p>
<dl><dd><ul><li> <a href="/wiki/Variables_-_mIRC" title="Variables - mIRC">Variables</a>
</li><li> <a href="/wiki/String_Manipulation_-_mIRC" title="String Manipulation - mIRC">String Manipulation</a>
</li><li> <a href="/wiki/Token_Manipulation_-_mIRC" title="Token Manipulation - mIRC">Token Manipulation</a>
</li><li> <a href="/wiki/Aliases_-_mIRC" title="Aliases - mIRC">Aliases</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Events</p>
<dl><dd><ul><li> <a href="/wiki/On_events_-_mIRC" title="On events - mIRC">On Events</a> 
</li><li> <a href="/wiki/Raw_Events_-_mIRC" title="Raw Events - mIRC">Raw Events</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Control Structures</p>
<dl><dd><ul><li> <a href="/wiki/Conditional_statements_-_mIRC" title="Conditional statements - mIRC">If Then Else</a>
</li><li> <a href="/wiki/While_Loops_-_mIRC" title="While Loops - mIRC">While Loops</a>
</li><li> <a href="/wiki/Goto_statements_-_mIRC" title="Goto statements - mIRC">Goto Loops</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Operators</p>
<dl><dd><ul><li> <a href="/wiki/Operators_-_mIRC" title="Operators - mIRC">Operators</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">GUI Scripting</p>
<dl><dd><ul><li> <a href="/wiki/Custom_Windows_-_mIRC" title="Custom Windows - mIRC">Custom Windows</a>
</li><li> <a href="/wiki/Picture_Windows_-_mIRC" title="Picture Windows - mIRC">Picture Windows</a>
</li><li> <a href="/wiki/Dialogs_-_mIRC" title="Dialogs - mIRC">Dialogs</a>
</li><li> <a href="/wiki/Dialog_Components_-_mIRC" title="Dialog Components - mIRC">Dialog Components</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Data Storage</p>
<dl><dd><ul><li> <a href="/wiki/Hash_Tables_-_mIRC" title="Hash Tables - mIRC">Hash Tables</a>
</li><li> <a href="/wiki/INI_Files_-_mIRC" title="INI Files - mIRC">INI Files</a>
</li><li> <a href="/wiki/Text_Files_-_mIRC" title="Text Files - mIRC">Text Files</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Media</p>
<dl><dd><ul><li> <a href="/wiki/Playing_music_-_mIRC" title="Playing music - mIRC">Playing Music</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Sockets</p>
<dl><dd><ul><li> <a href="/wiki/Sockets_-_mIRC" title="Sockets - mIRC">Sockets (Intro)</a>
</li><li> <a href="/wiki/TCP_Sockets_-_mIRC" title="TCP Sockets - mIRC">TCP Sockets</a>
</li><li> <strong class="selflink">UDP Sockets</strong>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Advanced Scripting</p>
<dl><dd><ul><li> <a href="/wiki/Evaluation_Brackets_-_mIRC" title="Evaluation Brackets - mIRC">Eval Brackets</a> 
</li><li> <a href="/wiki/Component_Object_Model_(COM)_-_mIRC" title="Component Object Model (COM) - mIRC" class="mw-redirect">COM</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Security</p>
<dl><dd><ul><li> <a href="/wiki/MSL_Injection_-_mIRC" title="MSL Injection - mIRC">mSL Injection</a>
</li></ul>
</dd></dl>
<p style="border-bottom: 1px dashed #C9C9C9; color: #363636; display: block; font-weight: bold; margin-top: 18px; padding-bottom: 5px; width: 179px;">Additional Resources</p>
<dl><dd><ul><li> <a href="/wiki/List_of_commands_-_mIRC" title="List of commands - mIRC">mSL Commands</a>
</li><li> <a href="/wiki/List_of_identifiers_-_mIRC" title="List of identifiers - mIRC">mSL Identifiers</a>
</li><li> <a href="/wiki/List_of_on_events_-_mIRC" title="List of on events - mIRC">On Events</a>
</li></ul>
</dd></dl>
</td></tr></table>
<p><span class="noprint plainlinks navbar" style="float:right;"><small><span style="white-space:nowrap;word-spacing:-.12em;"><a href="/wiki/Template:MIRC_Guide" title="Template:MIRC Guide"><span style="" title="View this template">v</span></a><span style="">&#32;<b>&#183;</b>&#32;</span><a href="/wiki/Template:MIRC_Guide" title="Template:MIRC Guide"><span style="" title="Discuss this template">d</span></a><span style="">&#32;<b>&#183;</b>&#32;</span><a rel="nofollow" class="external text" href="http://en.wikichip.org/w/index.php?title=Template:MIRC_Guide&amp;action=edit"><span style="" title="Edit this template">e</span></a></span></small></span>
</p>
</div>
<div style="margin-left: auto; margin-right: auto; white-space: pre-wrap; overflow: visible;background: #F8F8F8; width: 600px; border: 1px solid #D3DCE2; padding: 10px;"><b>Prerequisite knowledge:</b><br />This article assumes that you have intermediate to advanced knowledge of the <a href="/wiki/MIRC_Scripting_Language" title="MIRC Scripting Language">mIRC Scripting Language</a> and familiarity with <a href="/wiki/On_events_-_mIRC" title="On events - mIRC">on events</a> and <a href="/wiki/Aliases_-_mIRC" title="Aliases - mIRC">custom aliases</a>.</div>
<p>This tutorial is the <b>UDP</b> Sockets continuation of the <a href="/wiki/Sockets_-_mIRC" title="Sockets - mIRC">Sockets (Intro) tutorial</a>. If you haven't read that, please do so first before moving on to this one. 
</p><p>Recall that UDP is a connectionless protocol service. Because of this there are no on sockopen/sockread/sockclose events for the different stages like TCP. The basic idea is you send a message and quit, or you send a message and wait for response.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Sending_A_Packet"><span class="tocnumber">1</span> <span class="toctext">Sending A Packet</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Listening_for_Incoming_Data"><span class="tocnumber">2</span> <span class="toctext">Listening for Incoming Data</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Socket_Failure_and_More_Data_Sending"><span class="tocnumber">3</span> <span class="toctext">Socket Failure and More Data Sending</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Examples"><span class="tocnumber">4</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Example_1_-_Time_Protocol"><span class="tocnumber">4.1</span> <span class="toctext">Example 1 - Time Protocol</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Example_2_-_QOTD_Protocol"><span class="tocnumber">4.2</span> <span class="toctext">Example 2 - QOTD Protocol</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2><span class="editsection">[<a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit&amp;section=1" title="Edit section: Sending A Packet">edit</a>]</span> <span class="mw-headline" id="Sending_A_Packet"> Sending A Packet </span></h2>
<p>The /sockudp command allows you to send data to a specific address at a specific port destination. The syntax is:
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_comment">; Sending some data</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockudp_command_-_mIRC" title="/sockudp - mIRC Command" style="text-decoration: none"><span class="mirc_command">/sockudp</span></a> [-kb] &lt;handle&gt; &lt;ipaddress&gt; &lt;port&gt; [numbytes] [text|%var|&amp;bvar]</span></pre></span>
<p>By default, /sockudp sends the entire data specified. The -b switch can be used to limit the amount of bytes sent. 
</p><p>If you are expecting some data back, the -k switch can be used to force the UDP socket to remain open. This will allow you to listen to incoming data.
</p>
<h2><span class="editsection">[<a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit&amp;section=2" title="Edit section: Listening for Incoming Data">edit</a>]</span> <span class="mw-headline" id="Listening_for_Incoming_Data"> Listening for Incoming Data </span></h2>
<p>If you are expecting data back (I.E. if you specified the -k switch) you can listen for incoming data via the on udpread event.
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_control">on</span> *:<span class="mirc_control">udpread</span>:&lt;handle&gt;:<span class="mirc_bracket">{</span></span>
<span class="code_line"><span class="mirc_comment">  &#160;; your code goes here</span></span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<h2><span class="editsection">[<a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit&amp;section=3" title="Edit section: Socket Failure and More Data Sending">edit</a>]</span> <span class="mw-headline" id="Socket_Failure_and_More_Data_Sending"> Socket Failure and More Data Sending </span></h2>
<p>The on sockwrite event can be used to write additional data when the previous data is sent. Additionally, If the sockudp command fails, the on sockwrite event will trigger $sockerr set to a non-zero value.
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_control">on</span> *:<span class="mirc_control">sockwrite</span>:&lt;handle&gt;:<span class="mirc_bracket">{</span></span>
<span class="code_line"><span class="mirc_comment">  &#160;; your code goes here</span></span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<h2><span class="editsection">[<a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit&amp;section=4" title="Edit section: Examples">edit</a>]</span> <span class="mw-headline" id="Examples"> Examples </span></h2>
<h3><span class="editsection">[<a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit&amp;section=5" title="Edit section: Example 1 - Time Protocol">edit</a>]</span> <span class="mw-headline" id="Example_1_-_Time_Protocol"> Example 1 - Time Protocol </span></h3>
<p>This example will use the Time Protocol to display the current time. The Time Protocol is a very simple network protocol that provides site-independent, machine readable date and time. The protocol is defined in <a class="external mw-magiclink-rfc" rel="nofollow" href="//tools.ietf.org/html/rfc868">RFC 868</a>. 
</p><p>From <a class="external mw-magiclink-rfc" rel="nofollow" href="//tools.ietf.org/html/rfc868">RFC 868</a>:
</p>
<span class="tex2jax_ignore"><pre>When used via UDP the time service works as follows:

 S: Listen on port 37 (45 octal).
 U: Send an empty datagram to port 37.
 S: Receive the empty datagram.
 S: Send a datagram containing the time as a 32 bit binary number.
 U: Receive the time datagram.

 The server listens for a datagram on port 37. When a datagram
 arrives, the server returns a datagram containing the 32-bit time
 value. If the server is unable to determine the time at its site, it
 should discard the arriving datagram and make no reply.</pre></span>
<p>From the instructions above you can see that the first thing we have to do is send an empty datagram to their server. On port 37. &amp;null will hold our NULL byte.
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><a href="http://en.wikichip.org/wiki/Aliases_-_mIRC" title="Aliases - mIRC" style="text-decoration: none;"><span class="mirc_control">alias</span></a> <em>getTime</em> <span class="mirc_bracket"><span class="mirc_bracket">{</span></span></span>
<span class="code_line"><span class="mirc_comment"> &#160;; NULL byte</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//bset_command_-_mIRC" title="/bset - mIRC Command" style="text-decoration: none"><span class="mirc_command">  bset</span></a> &amp;null 1 0</span>
<span class="code_line"><span class="mirc_comment"> &#160;; Time-a.nist.gov = 129.6.15.28</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockudp_command_-_mIRC" title="/sockudp - mIRC Command" style="text-decoration: none"><span class="mirc_command">  sockudp</span></a> -k getTime 129.6.15.28 37 &amp;null</span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<p>Let's add a single line of code to print if an error occurred
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_control">on</span> *:<span class="mirc_control">sockwrite</span>:getTime:<span class="mirc_bracket">{</span></span>
<span class="code_line">  <span class="mirc_control">if</span> <span class="mirc_bracket">&#x28;</span><a href="http://en.wikichip.org/wiki/$sockerr_identifier_-_mIRC" title="$sockerr - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sockerr</span></a><span class="mirc_bracket">&#x29;</span><a href="http://en.wikichip.org/wiki//echo_command_-_mIRC" title="/echo - mIRC Command" style="text-decoration: none"><span class="mirc_command"> echo</span></a> -a /getTime: Error: <a href="http://en.wikichip.org/wiki/$sock_identifier_-_mIRC" title="$sock - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sock</span></a><span class="mirc_bracket">&#x28;</span><a href="http://en.wikichip.org/wiki/$sockname_identifier_-_mIRC" title="$sockname - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sockname</span></a><span class="mirc_bracket">&#x29;</span>.wserr - <a href="http://en.wikichip.org/wiki/$sock_identifier_-_mIRC" title="$sock - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sock</span></a><span class="mirc_bracket">&#x28;</span><a href="http://en.wikichip.org/wiki/$sockname_identifier_-_mIRC" title="$sockname - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sockname</span></a><span class="mirc_bracket">&#x29;</span>.wsmsg</span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<p>Now, all we have to do is sit and wait for the datagram response. Remember that since UDP is connectionless protocol, its header is much smaller, thus much faster (Ideal for a time protocol).
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_control">on</span> *:<span class="mirc_control">udpRead</span>:getTime: <span class="mirc_bracket">{</span></span>
<span class="code_line"><span class="mirc_comment">  &#160;; read the reply</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockread_command_-_mIRC" title="/sockread - mIRC Command" style="text-decoration: none"><span class="mirc_command">   sockread</span></a> -f &amp;time</span>
<span class="code_line">&#160;</span>
<span class="code_line"><span class="mirc_comment">  &#160;; bvar to var</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//var_command_-_mIRC" title="/var - mIRC Command" style="text-decoration: none"><span class="mirc_command">   var</span></a> <span class="mirc_variable">%time</span> <a href="http://en.wikichip.org/wiki/$bvar_identifier_-_mIRC" title="$bvar - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$bvar</span></a><span class="mirc_bracket">&#x28;</span>&amp;time,1,<a href="http://en.wikichip.org/wiki/$bvar_identifier_-_mIRC" title="$bvar - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$bvar</span></a><span class="mirc_bracket">&#x28;</span>&amp;time,0<span class="mirc_bracket">&#x29;</span><span class="mirc_bracket">&#x29;</span></span>
<span class="code_line">&#160;</span>
<span class="code_line"><span class="mirc_comment">  &#160;; get convert to binary</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//var_command_-_mIRC" title="/var - mIRC Command" style="text-decoration: none"><span class="mirc_command">   var</span></a> <span class="mirc_variable">%bin</span> <a href="http://en.wikichip.org/wiki/$regsubex_identifier_-_mIRC" title="$regsubex - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$regsubex</span></a><span class="mirc_bracket">&#x28;</span><span class="mirc_variable">%time</span>,/<span class="mirc_bracket">&#x28;</span>\d+<span class="mirc_bracket">&#x29;</span>/g,<a href="http://en.wikichip.org/wiki/$base_identifier_-_mIRC" title="$base - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$base</span></a><span class="mirc_bracket">&#x28;</span>\1,10,2,8<span class="mirc_bracket">&#x29;</span><span class="mirc_bracket">&#x29;</span></span>
<span class="code_line">&#160;</span>
<span class="code_line"><span class="mirc_comment">  &#160;; print it and close the socket</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//echo_command_-_mIRC" title="/echo - mIRC Command" style="text-decoration: none"><span class="mirc_command">   echo</span></a> -a our 32-bit time value: <span class="mirc_variable">%bin</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockclose_command_-_mIRC" title="/sockclose - mIRC Command" style="text-decoration: none"><span class="mirc_command">   sockclose</span></a> <a href="http://en.wikichip.org/wiki/$sockname_identifier_-_mIRC" title="$sockname - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sockname</span></a></span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<p>Let's make sense of this 32bit time value, shall we?
</p><p>Once again, from the <a class="external mw-magiclink-rfc" rel="nofollow" href="//tools.ietf.org/html/rfc868">RFC 868</a>:
</p>
<span class="tex2jax_ignore"><pre>The Time

 The time is the number of seconds since 00:00 (midnight) 1 January 1900
 GMT, such that the time 1 is 12:00:01 am on 1 January 1900 GMT; this
 base will serve until the year 2036.

 For example:

 the time 2,208,988,800 corresponds to 00:00 1 Jan 1970 GMT,
 2,398,291,200 corresponds to 00:00 1 Jan 1976 GMT,
 2,524,521,600 corresponds to 00:00 1 Jan 1980 GMT,
 2,629,584,000 corresponds to 00:00 1 May 1983 GMT,
 and -1,297,728,000 corresponds to 00:00 17 Nov 1858 GMT.</pre></span>
<p>Since we know that 2,208,988,800 = 00:00 1 Jan 1970 GMT (Unix epoch). We can just do $calc(%time - 2208988800) to get the current Unix time. Now all we got to do is use $asctime to format it nicely. 
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_control">on</span> *:<span class="mirc_control">udpRead</span>:getTime: <span class="mirc_bracket">{</span></span>
<span class="code_line"><span class="mirc_comment"> &#160;; read the reply</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockread_command_-_mIRC" title="/sockread - mIRC Command" style="text-decoration: none"><span class="mirc_command">  sockread</span></a> -f &amp;time</span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//var_command_-_mIRC" title="/var - mIRC Command" style="text-decoration: none"><span class="mirc_command">  var</span></a> <span class="mirc_variable">%time</span> <a href="http://en.wikichip.org/wiki/$bvar_identifier_-_mIRC" title="$bvar - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$bvar</span></a><span class="mirc_bracket">&#x28;</span>&amp;time,1,<a href="http://en.wikichip.org/wiki/$bvar_identifier_-_mIRC" title="$bvar - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$bvar</span></a><span class="mirc_bracket">&#x28;</span>&amp;time,0<span class="mirc_bracket">&#x29;</span><span class="mirc_bracket">&#x29;</span></span>
<span class="code_line">&#160;</span>
<span class="code_line"><span class="mirc_comment"> &#160;; convert to binary, remove spaces</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//var_command_-_mIRC" title="/var - mIRC Command" style="text-decoration: none"><span class="mirc_command">  var</span></a> <span class="mirc_variable">%bin</span> <a href="http://en.wikichip.org/wiki/$regsubex_identifier_-_mIRC" title="$regsubex - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$regsubex</span></a><span class="mirc_bracket">&#x28;</span><span class="mirc_variable">%time</span>, /<span class="mirc_bracket">&#x28;</span>\d+<span class="mirc_bracket">&#x29;</span>\s?/g, <a href="http://en.wikichip.org/wiki/$base_identifier_-_mIRC" title="$base - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$base</span></a><span class="mirc_bracket">&#x28;</span>\1, 10, 2, 8<span class="mirc_bracket">&#x29;</span><span class="mirc_bracket">&#x29;</span></span>
<span class="code_line">&#160;</span>
<span class="code_line"><span class="mirc_comment"> &#160;; get the current unix time in decimal system</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//var_command_-_mIRC" title="/var - mIRC Command" style="text-decoration: none"><span class="mirc_command">  var</span></a> <span class="mirc_variable">%time</span> = <a href="http://en.wikichip.org/wiki/$base_identifier_-_mIRC" title="$base - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$base</span></a><span class="mirc_bracket">&#x28;</span><span class="mirc_variable">%bin</span>, 2, 10<span class="mirc_bracket">&#x29;</span></span>
<span class="code_line">&#160;</span>
<span class="code_line"><span class="mirc_comment"> &#160;; print the time and close the socket</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//echo_command_-_mIRC" title="/echo - mIRC Command" style="text-decoration: none"><span class="mirc_command">  echo</span></a> -a Currnt Time/Date: <a href="http://en.wikichip.org/wiki/$asctime_identifier_-_mIRC" title="$asctime - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$asctime</span></a><span class="mirc_bracket">&#x28;</span><a href="http://en.wikichip.org/wiki/$calc_identifier_-_mIRC" title="$calc - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$calc</span></a><span class="mirc_bracket">&#x28;</span><span class="mirc_variable">%time</span> - 2208988800<span class="mirc_bracket">&#x29;</span>, yyyy-mm-dd hh:nn:ss TT<span class="mirc_bracket">&#x29;</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockclose_command_-_mIRC" title="/sockclose - mIRC Command" style="text-decoration: none"><span class="mirc_command">  sockclose</span></a> <a href="http://en.wikichip.org/wiki/$sockname_identifier_-_mIRC" title="$sockname - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sockname</span></a></span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<h3><span class="editsection">[<a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit&amp;section=6" title="Edit section: Example 2 - QOTD Protocol">edit</a>]</span> <span class="mw-headline" id="Example_2_-_QOTD_Protocol"> Example 2 - QOTD Protocol </span></h3>
<p>In this example we will use an interesting protocol, the Quote Of The Day, <a class="external mw-magiclink-rfc" rel="nofollow" href="//tools.ietf.org/html/rfc865">RFC 865</a>. This is a very simple protocol; you send a blank datagram, and the server responds with a quote. The hardest part was actually finding a website that still supports this protocol. (The reason most servers don't have this service enabled is because it is vulnerable to a ping-pong attack, where an attacker spoofs a server's IP (that supports QOTD protocol) and sends a request to a second server that support it, causing both server to flood each other) 
</p><p>Send a request:
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><a href="http://en.wikichip.org/wiki/Aliases_-_mIRC" title="Aliases - mIRC" style="text-decoration: none;"><span class="mirc_control">alias</span></a> <em>getQOTD</em> <span class="mirc_bracket"><span class="mirc_bracket">{</span></span></span>
<span class="code_line"><span class="mirc_comment"> &#160;; NULL byte</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//bset_command_-_mIRC" title="/bset - mIRC Command" style="text-decoration: none"><span class="mirc_command">  bset</span></a> &amp;null 1 0</span>
<span class="code_line"><span class="mirc_comment"> &#160;; Dns resolved quotes4all.net to 85.25.143.214</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockudp_command_-_mIRC" title="/sockudp - mIRC Command" style="text-decoration: none"><span class="mirc_command">  sockudp</span></a> -k getQOTD 85.25.143.214 17 &amp;null</span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>
<p>Now wait for the quote:
</p>
<span class="tex2jax_ignore"><pre><span class="code_line"><span class="mirc_control">on</span> *:<span class="mirc_control">udpRead</span>:QOTD: <span class="mirc_bracket">{</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//var_command_-_mIRC" title="/var - mIRC Command" style="text-decoration: none"><span class="mirc_command">   var</span></a> <span class="mirc_variable">%Quote</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockread_command_-_mIRC" title="/sockread - mIRC Command" style="text-decoration: none"><span class="mirc_command">   sockread</span></a> -f <span class="mirc_variable">%Quote</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//echo_command_-_mIRC" title="/echo - mIRC Command" style="text-decoration: none"><span class="mirc_command">   echo</span></a> -ea <span class="mirc_variable">%Quote</span></span>
<span class="code_line"><a href="http://en.wikichip.org/wiki//sockclose_command_-_mIRC" title="/sockclose - mIRC Command" style="text-decoration: none"><span class="mirc_command">   sockclose</span></a> <a href="http://en.wikichip.org/wiki/$sockname_identifier_-_mIRC" title="$sockname - mIRC Identifier" style="text-decoration: none"><span class="mirc_identifier">$sockname</span></a></span>
<span class="code_line"><span class="mirc_bracket">}</span></span></pre></span>

<!-- 
NewPP limit report
Preprocessor visited node count: 262/1000000
Preprocessor generated node count: 860/1000000
Postâ€expand include size: 11222/2097152 bytes
Template argument size: 3583/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikichip:pcache:idhash:37-0!*!0!!en!*!* and timestamp 20140528133923 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://en.wikichip.org/w/index.php?title=UDP_Sockets_-_mIRC&amp;oldid=86">http://en.wikichip.org/w/index.php?title=UDP_Sockets_-_mIRC&amp;oldid=86</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/wiki/Category:MIRC" title="Category:MIRC">MIRC</a></li></ul></div></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<!-- header -->
			<div id="mw-head">
				
<!-- 0 -->
<div id="p-personal" role="navigation" class="">
	<h3>Personal tools</h3>
	<ul>
<li id="pt-anonuserpage"><a href="/wiki/User:174.129.237.157" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">174.129.237.157</a></li><li id="pt-anontalk"><a href="/wiki/User_talk:174.129.237.157" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li><li id="pt-createaccount"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=UDP+Sockets+-+mIRC&amp;type=signup">Create account</a></li><li id="pt-anonlogin"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=UDP+Sockets+-+mIRC" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>

<!-- /0 -->
				<div id="left-navigation">
					
<!-- 0 -->
<div id="p-namespaces" role="navigation" class="vectorTabs">
	<h3>Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/UDP_Sockets_-_mIRC"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/w/index.php?title=Talk:UDP_Sockets_-_mIRC&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
				</div>
				<div id="right-navigation">
					
<!-- 0 -->
<div id="p-views" role="navigation" class="vectorTabs">
	<h3>Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/wiki/UDP_Sockets_-_mIRC" >Read</a></span></li>
					<li id="ca-edit"><span><a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=edit"  title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet">
	<h3><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="/w/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" title="Search WikiChip [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="/w/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
				</div>
			</div>
			<!-- /header -->
			<!-- panel -->
			<div id="mw-panel">
				<!-- logo -->
					<div id="p-logo" role="banner"><a style="background-image: url(/w/skins/common/images/wikichip.png);" href="/wiki/Main_Page"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" role="navigation" id='p-navigation'>
	<h3>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="http://en.wikichip.org/wiki/Special:Random?nocache=1" rel="nofollow" title="Load a random page [x]" accesskey="x">Random page</a></li>
		</ul>
	</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" role="navigation" id='p-tb'>
	<h3>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/UDP_Sockets_-_mIRC" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/UDP_Sockets_-_mIRC" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-upload"><a href="/wiki/Special:UploadWizard" title="Upload files [u]" accesskey="u">Upload file</a></li>
			<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;oldid=86" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/w/index.php?title=UDP_Sockets_-_mIRC&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
			<!-- /panel -->
		</div>
		<!-- footer -->
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 30 November 2013, at 20:59.</li>
											<li id="footer-info-viewcount">This page has been accessed 436 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="/wiki/WikiChip:Privacy_policy" title="WikiChip:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/WikiChip:About" title="WikiChip:About">About WikiChip</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/WikiChip:General_disclaimer" title="WikiChip:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="/w/skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="/w/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.vector.collapsibleNav","ext.vector.collapsibleTabs","skins.vector.js"], null, true);
}</script>
<script src="http://en.wikichip.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<!-- Served in 0.161 secs. -->
	</body>
</html>
